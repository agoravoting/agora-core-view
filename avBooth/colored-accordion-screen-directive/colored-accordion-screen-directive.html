<!-- top navbar with question title -->
<nav class="navbar navbar-default navbar-fixed-top" av-affix-top=".navbar-unfixed-top" role="navigation">
  <div class="container">
    <div class="row avb-top-navbar">
      <div class="pull-left"
        ng-i18next="[i18next]({sprintf:['1','3', stateData.questionNum+1, election.questions.length]})avBooth.stepAndQuestionNumber">
      </div>
      <div class="pull-right">
        <span
          class="glyphicon glyphicon-question-sign"
          ng-click="launchHelp()">
        </span>
        <span ng-click="launchHelp()" ng-i18next="avBooth.helpTitle"></span>
        <span class="dropdown left-padding" av-change-lang>
      </div>
    </div>

  </div>
</nav>

<div class="wrapper-unfixed">
  <div class="navbar-unfixed-top text-center" av-collapsing=".unfixed-top-height" data-toggle-selector="[avb-multi-question] #avb-toggle">
    <div class="container">
      <div class="hidden unfixed-top-height"></div>
      <h1 ng-if="!showingPreset">{{stateData.question.title}}</h1>
      <p
        ng-if="!showingPreset"
        class="description"
        ng-bind-html="stateData.question.description | addTargetBlank"></p>
    </div>
  </div>
</div>

<div id="avb-toggle" class="text-center item-block hidden">
  <span class="glyphicon glyphicon-play"></span>
</div>

<div class="content avb-content" ng-if="!showingPreset">
  <div class="container">
      <div class="row">
      <!-- show available options and filter -->
      <div class="col-xs-12">
        <div class="pull-left hidden-xs">
          <h4 class="text-brand-success" ng-i18next="avBooth.questionAvailableOptionsTitle"></h4>
        </div>
        <div class="pull-right filter-input hidden-xs">
          <input type="text"
            class="filter-input"
            id="filter-input"
            ng-model="stateData.filter"
            ng-model-options="{debounce: 500}"
            ng-i18next="[placeholder]avBooth.filterOptionsPlaceholder"
            />
          <span class="glyphicon glyphicon-search"></span>
        </div>

        <div class="clearfix"></div>

        <div class="accordion-mode">
          <div avb-accordion-option
            ng-repeat="option in emptyCategory.options"
            class="animate-repeat highlight-selected"
            ng-class="{selected: option.selected > -1}">
          </div>
          <div accordion close-others="folding_policy !== 'unfold-all'">
            <div accordion-group ng-repeat="category in categories" is-open="category.isOpen"
                ng-class="{'in': category.isOpen}">
              <div accordion-heading>
                <span>{{category.title}}</span>
                <span
                  class="pull-right glyphicon"
                  ng-class="{'glyphicon-chevron-down': category.isOpen, 'glyphicon-chevron-right': !category.isOpen}">
                </span>
                <span class="accordion-num-label pull-right label label-primary"
                  ng-if="(category.options | avbSelectedOptions).length > 0">
                  {{(category.options | avbSelectedOptions).length }}
                </span>
              </div>
              <div avb-accordion-option
                ng-repeat="option in category.options"
                ng-if="!option.subcat"
                class="coloredopt animate-repeat highlight-selected"
                ng-class="{selected: option.selected > -1, support: option.support}">
              </div>

              <div ng-repeat="subc in category.options" ng-if="subc.subcat">
                  <div class="subh">
                    <span>{{subc.subtitle}}</span>
                    <span class="accordion-num-label pull-right label label-primary"
                      ng-if="(subc.options | avbSelectedOptions).length > 0">
                      {{(subc.options | avbSelectedOptions).length }}
                    </span>
                  </div>

                  <div avb-accordion-option
                    ng-repeat="option in subc.options"
                    ng-if="!option.subcat"
                    class="coloredopt animate-repeat highlight-selected"
                    ng-class="{selected: option.selected > -1, support: option.support}">
                  </div>
              </div>
            </div>
          </div>
        </div>


      </div>
      </div>
  </div>
</div>

